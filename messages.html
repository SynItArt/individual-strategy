<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒë‹´ ì‹ ì²­ ë©”ì‹œì§€ í™•ì¸ | ì‹ ëŒ€ì‹ ì»¨ì„¤íŒ…</title>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
            --success: #4ade80;
            --warning: #fbbf24;
            --dark: #1e293b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            line-height: 1.7;
            min-height: 100vh;
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: #1a202c;
            color: white;
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            opacity: 0.8;
            font-size: 1rem;
        }

        .info-box {
            background: rgba(102, 126, 234, 0.1);
            border-left: 4px solid #667eea;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .info-box h3 {
            color: #667eea;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .info-box ul {
            list-style: none;
            padding-left: 0;
        }

        .info-box li {
            padding: 0.5rem 0;
            color: #cbd5e1;
        }

        .info-box li::before {
            content: "âœ“ ";
            color: #667eea;
            font-weight: bold;
            margin-right: 0.5rem;
        }

        .message-list {
            display: grid;
            gap: 1.5rem;
        }

        .message-card {
            background: #1a202c;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            transition: all 0.3s ease;
        }

        .message-card:hover {
            border-color: #667eea;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .message-info {
            flex: 1;
        }

        .message-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #e2e8f0;
            margin-bottom: 0.5rem;
        }

        .message-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            font-size: 0.9rem;
            color: #94a3b8;
        }

        .message-date {
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .message-content {
            background: #0f172a;
            padding: 1.5rem;
            border-radius: 10px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            color: #cbd5e1;
            max-height: 400px;
            overflow-y: auto;
        }

        .message-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #94a3b8;
        }

        .empty-state .icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: #94a3b8;
        }

        @media (max-width: 768px) {
            .message-header {
                flex-direction: column;
                gap: 1rem;
            }

            .message-meta {
                flex-direction: column;
                gap: 0.5rem;
            }

            .message-actions {
                flex-direction: column;
            }

            .btn {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“¨ ìƒë‹´ ì‹ ì²­ ë©”ì‹œì§€ í™•ì¸</h1>
            <p class="subtitle">ê³ ê°ë‹˜ë“¤ì˜ ìƒë‹´ ì‹ ì²­ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
        </div>

        <div class="info-box">
            <h3>ğŸ“‹ ë©”ì‹œì§€ í™•ì¸ ë°©ë²•</h3>
            <ul>
                <li><strong>Google Sheets:</strong> ì²´í¬ë¦¬ìŠ¤íŠ¸ì™€ ìƒë‹´ ì˜ˆì•½ ë°ì´í„°ê°€ ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤</li>
                <li><strong>SMS/ì¹´ì¹´ì˜¤í†¡:</strong> ê³ ê°ì´ ì§ì ‘ 010-2088-5383ìœ¼ë¡œ ì „ì†¡í•œ ë©”ì‹œì§€</li>
                <li><strong>API ì„œë²„:</strong> ë¡œì»¬ íŒŒì¼ë¡œ ì €ì¥ëœ ë°ì´í„° í™•ì¸</li>
            </ul>
        </div>

        <div id="messageList" class="message-list">
            <div class="loading">ë©”ì‹œì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>
    </div>

    <script>
        // ë©”ì‹œì§€ ë°ì´í„° ë¡œë“œ
        async function loadMessages() {
            const messageList = document.getElementById('messageList');
            
            try {
                // API ì„œë²„ì—ì„œ ë©”ì‹œì§€ ê°€ì ¸ì˜¤ê¸°
                const response = await fetch('/api/messages');
                
                if (response.ok) {
                    const data = await response.json();
                    displayMessages(data.messages || []);
                } else {
                    // APIê°€ ì—†ìœ¼ë©´ ë¡œì»¬ ë°ì´í„° í‘œì‹œ
                    displayLocalMessages();
                }
            } catch (error) {
                console.log('API í˜¸ì¶œ ì‹¤íŒ¨, ë¡œì»¬ ë°ì´í„° í‘œì‹œ:', error);
                displayLocalMessages();
            }
        }

        // ë¡œì»¬ ë°ì´í„° í‘œì‹œ
        function displayLocalMessages() {
            const messageList = document.getElementById('messageList');
            
            // Google Sheets ë§í¬ ì œê³µ
            messageList.innerHTML = `
                <div class="info-box">
                    <h3>ğŸ“Š Google Sheetsì—ì„œ í™•ì¸</h3>
                    <p style="margin-bottom: 1rem; color: #cbd5e1;">
                        ìƒë‹´ ì‹ ì²­ ë©”ì‹œì§€ëŠ” Google Sheetsì— ìë™ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
                    </p>
                    <a href="https://docs.google.com/spreadsheets/d/YOUR_SPREADSHEET_ID" 
                       target="_blank" 
                       class="btn btn-primary">
                        ğŸ“Š Google Sheets ì—´ê¸°
                    </a>
                </div>
                
                <div class="info-box">
                    <h3>ğŸ“± SMS/ì¹´ì¹´ì˜¤í†¡ í™•ì¸</h3>
                    <p style="margin-bottom: 1rem; color: #cbd5e1;">
                        ê³ ê°ì´ ì§ì ‘ ì „ì†¡í•œ ë©”ì‹œì§€ëŠ” íœ´ëŒ€í°ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                    </p>
                    <p style="color: #94a3b8; font-size: 0.9rem;">
                        ì „í™”ë²ˆí˜¸: <a href="tel:010-2088-5383" style="color: #667eea;">010-2088-5383</a>
                    </p>
                </div>
                
                <div class="info-box">
                    <h3>ğŸ’¾ ë¡œì»¬ íŒŒì¼ í™•ì¸</h3>
                    <p style="margin-bottom: 1rem; color: #cbd5e1;">
                        ì²´í¬ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ëŠ” ë¡œì»¬ íŒŒì¼ë¡œë„ ì €ì¥ë©ë‹ˆë‹¤.
                    </p>
                    <p style="color: #94a3b8; font-size: 0.9rem;">
                        ê²½ë¡œ: <code style="background: #0f172a; padding: 0.25rem 0.5rem; border-radius: 4px;">checklist_data/</code>
                    </p>
                </div>
            `;
        }

        // ë©”ì‹œì§€ í‘œì‹œ
        function displayMessages(messages) {
            const messageList = document.getElementById('messageList');
            
            if (messages.length === 0) {
                messageList.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">ğŸ“­</div>
                        <h3>ì•„ì§ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ìƒë‹´ ì‹ ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                    </div>
                `;
                return;
            }

            messageList.innerHTML = messages.map(msg => `
                <div class="message-card">
                    <div class="message-header">
                        <div class="message-info">
                            <div class="message-name">${msg.name || 'ì´ë¦„ ì—†ìŒ'}</div>
                            <div class="message-meta">
                                <span>ğŸ“ ${msg.phone || 'ì—°ë½ì²˜ ì—†ìŒ'}</span>
                                ${msg.email ? `<span>ğŸ“§ ${msg.email}</span>` : ''}
                                ${msg.business ? `<span>ğŸ¢ ${msg.business}</span>` : ''}
                            </div>
                        </div>
                        <div class="message-date">${formatDate(msg.created_at)}</div>
                    </div>
                    <div class="message-content">${msg.message || 'ë©”ì‹œì§€ ì—†ìŒ'}</div>
                    <div class="message-actions">
                        <a href="tel:${msg.phone?.replace(/-/g, '')}" class="btn btn-primary">ğŸ“ ì „í™”í•˜ê¸°</a>
                        <a href="sms:${msg.phone?.replace(/-/g, '')}" class="btn btn-secondary">ğŸ’¬ ë¬¸ì ë³´ë‚´ê¸°</a>
                    </div>
                </div>
            `).join('');
        }

        // ë‚ ì§œ í¬ë§·íŒ…
        function formatDate(dateString) {
            if (!dateString) return 'ë‚ ì§œ ì—†ìŒ';
            
            // ì—°ì›”ì¼ì‹œë¶„ì´ˆ í˜•ì‹ (YYYYMMDDHHMMSS) íŒŒì‹±
            if (dateString.length === 14) {
                const year = dateString.substring(0, 4);
                const month = dateString.substring(4, 6);
                const day = dateString.substring(6, 8);
                const hour = dateString.substring(8, 10);
                const minute = dateString.substring(10, 12);
                return `${year}-${month}-${day} ${hour}:${minute}`;
            }
            
            // ISO í˜•ì‹ íŒŒì‹±
            const date = new Date(dateString);
            return date.toLocaleString('ko-KR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', loadMessages);
    </script>
</body>
</html>

